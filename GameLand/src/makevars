# This makefile is shared by all subsystems (a subsystem is a directory under this one).
# It provides:
#	- target 'all' that builds all sources 
#	- target 'clean' that removes all build artefacts  
#   - a few 'useful variables'
include ../makerecipes
 
# sources in current folder
SRCS = $(wildcard *.cpp)
# objects from current folder
OBJS = $(SRCS:.cpp=.o)
DEPS = $(SRCS:.cpp=.depends)

all: $(OBJS)  

clean:
	rm -f $(DEPS) $(OBJS)

# move test to run directory before running it
test: $(OBJS) $(TEST)	
	cp $(TEST) ../../
	$(MAKE) -C ../.. run_test

-include $(DEPS)